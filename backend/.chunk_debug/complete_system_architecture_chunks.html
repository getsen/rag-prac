<!DOCTYPE html><html><head>
<title>Chunks: complete_system_architecture.md</title>
<meta charset='utf-8'><meta name='viewport' content='width=device-width'>
<style>
body{font-family:Arial,sans-serif;background:#f5f5f5;padding:20px;}
.container{max-width:1400px;margin:0 auto;}
.header{background:#2c3e50;color:white;padding:20px;border-radius:5px;margin-bottom:20px;}
.chunk{background:white;margin-bottom:20px;padding:20px;border-left:4px solid #3498db;border-radius:5px;}
.chunk-title{font-weight:bold;font-size:16px;margin-bottom:10px;}
.chunk-meta{font-size:12px;color:#7f8c8d;margin-bottom:10px;}
.tag{display:inline-block;padding:4px 8px;background:#ecf0f1;border-radius:3px;margin-right:5px;font-size:11px;}
.section-path{color:#27ae60;font-size:12px;margin:8px 0;}
.content{background:#f8f9fa;padding:15px;border-radius:3px;font-family:monospace;font-size:12px;max-height:400px;overflow-y:auto;white-space:pre-wrap;}
</style></head><body>
<div class='container'>
<div class='header'><h1>üìÑ complete_system_architecture.md</h1><p>Total Chunks: 30</p></div>
<div class='chunk'>
<div class='chunk-title'>Chunk #1</div>
<div class='chunk-meta'>Lines 1-2</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow

# AI Chat Application - Complete System Architecture & Flow</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #2</div>
<div class='chunk-meta'>Lines 3-16</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Executive Summary</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Executive Summary

## Executive Summary

This is an AI-powered chat application with advanced RAG (Retrieval-Augmented Generation) capabilities. It supports multiple LLM providers (Ollama, LlamaCPP, HuggingFace, OpenAI) and can use either local or OpenAI-based embeddings for document retrieval.

**Key Features:**
- Real-time streaming chat interface
- Document upload and RAG-based context retrieval
- **Fusion Retrieval (RRF)** ...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #3</div>
<div class='chunk-meta'>Lines 17-28</div>
<span class='tag'>steps
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Table of Contents</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Table of Contents

## Table of Contents
1. [System Architecture](#system-architecture)
2. [Application Startup Flow](#application-startup-flow)
3. [Chat Flow - Without RAG](#chat-flow---without-rag)
4. [Chat Flow - With Simple RAG](#chat-flow---with-simple-rag)
5. [Chat Flow - With Fusion Retrieval (RRF)](#chat-flow---with-fusion-retrieval-rrf)
6. [Document Upload Flow](#document-upload-flow)
7. [Component Details](#component-d...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #4</div>
<div class='chunk-meta'>Lines 29-63</div>
<span class='tag'>section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > System Architecture</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; System Architecture

## System Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Frontend (Next.js)                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ   Chat UI  ‚îÇ  ‚îÇ  useChat Hook ‚îÇ  ‚îÇ  SSE Event       ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ            ‚îÇ‚îÄ‚îÄ‚îÇ               ‚îÇ‚îÄ‚îÄ‚îÇ  Handler         ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #5</div>
<div class='chunk-meta'>Lines 64-163</div>
<span class='tag'>merged_section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Application Startup Flow</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Application Startup Flow

## Application Startup Flow

Section: AI Chat Application - Complete System Architecture & Flow &gt; Application Startup Flow &gt; Backend Initialization

### Backend Initialization

```mermaid
graph TD
    A[Start Backend] --&gt; B[Load Configuration]
    B --&gt; C[Initialize Embedding Provider]
    C --&gt; D{OpenAI Embeddings?}
    D --&gt;|Yes| E[Initialize OpenAI Embeddings]
    D --&gt;|No| F[Load SentenceTransforme...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #6</div>
<div class='chunk-meta'>Lines 164-247</div>
<span class='tag'>narrative
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Chat Flow - Without RAG</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Chat Flow - Without RAG

## Chat Flow - Without RAG

**User Action**: User types message and clicks send (RAG toggle OFF)

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend API
    participant G as Graph Service
    participant S as Session Service
    participant L as LLM Provider
    
    U-&gt;&gt;F: Type message & send
    F-&gt;&gt;F: Add user message to UI
    F-&gt;&gt;F: Creat...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #7</div>
<div class='chunk-meta'>Lines 164-247</div>
<span class='tag'>steps
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Chat Flow - Without RAG</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Chat Flow - Without RAG

## Chat Flow - Without RAG
1. **Frontend** (`useChat.ts:sendMessage`)
   - Adds user message to state immediately
   - Creates empty assistant message placeholder
   - Initiates SSE connection to `/api/chat/stream`

2. **Backend Router** (`chat.py:chat_stream`)
   - Receives request with `use_rag: false`
   - Calls `stream_generator()` which calls `graph_service.chat_stream()`

3. **Graph Service** (`gr...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #8</div>
<div class='chunk-meta'>Lines 248-350</div>
<span class='tag'>narrative
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Chat Flow - With Simple RAG</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Chat Flow - With Simple RAG

## Chat Flow - With Simple RAG

**User Action**: User types message and clicks send (RAG toggle ON)

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend API
    participant G as Graph Service
    participant R as RAG Service
    participant E as Embedding Provider
    participant C as ChromaDB
    participant L as LLM Provider
    
    U-&gt;&gt;...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #9</div>
<div class='chunk-meta'>Lines 248-350</div>
<span class='tag'>steps
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Chat Flow - With Simple RAG</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Chat Flow - With Simple RAG

## Chat Flow - With Simple RAG
1. **Query Embedding** (`graph_service.py`)
   - User's message is embedded using the embedding provider
   - **Local**: SentenceTransformer generates embedding locally
   - **OpenAI**: API call to generate embedding

2. **Document Retrieval** (`rag_service.py:search`)
   - Queries ChromaDB with embedding vector
   - Uses cosine similarity to find top 3 most relevant c...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #10</div>
<div class='chunk-meta'>Lines 351-480</div>
<span class='tag'>narrative
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Chat Flow - With Fusion Retrieval (RRF)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Chat Flow - With Fusion Retrieval (RRF)

## Chat Flow - With Fusion Retrieval (RRF)

**User Action**: User types question with Fusion Retrieval enabled (RAG + Fusion ON)

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend API
    participant G as Graph Service
    participant FR as Fusion RAG Service
    participant E as Embedding Provider
    participant BM as BM25 I...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #11</div>
<div class='chunk-meta'>Lines 351-480</div>
<span class='tag'>steps
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Chat Flow - With Fusion Retrieval (RRF)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Chat Flow - With Fusion Retrieval (RRF)

## Chat Flow - With Fusion Retrieval (RRF)
1. **Fusion Retrieval Initialization** (`fusion_rag_service.py`)
   - Checks if BM25 index is built, builds if needed
   - Prepares to run multiple retrieval strategies in parallel

2. **Multi-Strategy Retrieval**
   
   **Strategy 1 - Vector Semantic Search:**
   - Embeds the user query
   - Queries ChromaDB for top 10 semantically similar docu...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #12</div>
<div class='chunk-meta'>Lines 481-579</div>
<span class='tag'>narrative
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Document Upload Flow</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Document Upload Flow

## Document Upload Flow

**User Action**: User uploads PDF/TXT/MD file

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend API
    participant DS as Document Service
    participant DL as Document Loader
    participant E as Embedding Provider
    participant R as RAG Service
    participant C as ChromaDB
    
    U-&gt;&gt;F: Select file & upload
    ...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #13</div>
<div class='chunk-meta'>Lines 481-579</div>
<span class='tag'>steps
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Document Upload Flow</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Document Upload Flow

## Document Upload Flow
1. **File Validation** (`document_service.py`)
   - Checks file extension (must be .pdf, .txt, or .md)
   - Calculates MD5 hash of file content

2. **Deduplication Check**
   - Looks up hash in `.document_hashes.json` registry
   - If found: Returns duplicate status, skips processing
   - If new: Proceeds with processing

3. **Text Extraction** (`document_loader.py`)
   - **PDF**: 
...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #14</div>
<div class='chunk-meta'>Lines 580-583</div>
<span class='tag'>merged_section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details

## Component Details

Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Backend Services

### Backend Services</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #15</div>
<div class='chunk-meta'>Lines 584-595</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Backend Services > Graph Service (`graph_service.py`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Backend Services &gt; Graph Service (`graph_service.py`)

#### Graph Service (`graph_service.py`)
- **Purpose**: Orchestrates the chat workflow using LangGraph
- **Key Methods**:
  - `chat()`: Non-streaming chat
  - `chat_stream()`: Streaming chat with statistics
- **Responsibilities**:
  - Retrieve conversation history
  - Coordinate RAG retrieval
  - Build prompts with context
  - Stream LLM responses
  - Tra...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #16</div>
<div class='chunk-meta'>Lines 596-603</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Backend Services > RAG Service (`rag_service.py`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Backend Services &gt; RAG Service (`rag_service.py`)

#### RAG Service (`rag_service.py`)
- **Purpose**: Manages document storage and retrieval
- **Key Methods**:
  - `add_document()`: Store document chunk with embedding
  - `search()`: Find similar documents
  - `get_context()`: Format documents as context string
- **Uses**: ChromaDB for vector storage</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #17</div>
<div class='chunk-meta'>Lines 604-610</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Backend Services > Session Service (`session_service.py`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Backend Services &gt; Session Service (`session_service.py`)

#### Session Service (`session_service.py`)
- **Purpose**: Manages conversation history
- **Key Methods**:
  - `add_message()`: Store user/assistant message
  - `get_conversation_history()`: Retrieve recent messages
- **Features**: In-memory caching for performance</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #18</div>
<div class='chunk-meta'>Lines 611-628</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Backend Services > Fusion RAG Service (`fusion_rag_service.py`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Backend Services &gt; Fusion RAG Service (`fusion_rag_service.py`)

#### Fusion RAG Service (`fusion_rag_service.py`)
- **Purpose**: Implements advanced fusion retrieval using Reciprocal Rank Fusion (RRF)
- **Key Methods**:
  - `fusion_search_with_diversity()`: Multi-strategy search with source diversity
  - `reciprocal_rank_fusion()`: Combines multiple retrieval strategies
  - `bm25_search()`: Keyword-based se...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #19</div>
<div class='chunk-meta'>Lines 629-634</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Backend Services > Embedding Service (`embedding_service.py`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Backend Services &gt; Embedding Service (`embedding_service.py`)

#### Embedding Service (`embedding_service.py`)
- **Purpose**: Provides embedding generation abstraction
- **Providers**:
  - `LocalEmbeddingProvider`: SentenceTransformer
  - `OpenAIEmbeddingProvider`: OpenAI API with batching</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #20</div>
<div class='chunk-meta'>Lines 635-636</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Frontend Components</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Frontend Components

### Frontend Components</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #21</div>
<div class='chunk-meta'>Lines 637-644</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Frontend Components > useChat Hook (`useChat.ts`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Frontend Components &gt; useChat Hook (`useChat.ts`)

#### useChat Hook (`useChat.ts`)
- **Purpose**: Manages chat state and API communication
- **Features**:
  - Session management
  - SSE event handling
  - Message state management
  - File upload handling</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #22</div>
<div class='chunk-meta'>Lines 645-651</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Frontend Components > MessageBubble (`MessageBubble.tsx`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Frontend Components &gt; MessageBubble (`MessageBubble.tsx`)

#### MessageBubble (`MessageBubble.tsx`)
- **Purpose**: Renders individual messages
- **Features**:
  - Markdown rendering
  - Code syntax highlighting
  - Statistics display (collapsible)</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #23</div>
<div class='chunk-meta'>Lines 652-661</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Component Details > Frontend Components > MessageStatistics (`MessageStatistics.tsx`)</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Component Details &gt; Frontend Components &gt; MessageStatistics (`MessageStatistics.tsx`)

#### MessageStatistics (`MessageStatistics.tsx`)
- **Purpose**: Displays response statistics
- **Shows**:
  - Token counts (input/output/total)
  - Source documents with relevance scores
  - Processing time in milliseconds
  - Fusion retrieval metadata (strategies used, unique sources)

---</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #24</div>
<div class='chunk-meta'>Lines 662-694</div>
<span class='tag'>merged_section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Configuration</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Configuration

## Configuration

Section: AI Chat Application - Complete System Architecture & Flow &gt; Configuration &gt; Environment Variables

### Environment Variables

```bash
# Provider Selection
PROVIDER_TYPE=ollama  # ollama, llamacpp, huggingface, openai

# LLM Settings
TEMPERATURE=0.7
MAX_TOKENS=512

# Ollama
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=gpt-oss:latest

# OpenAI (for LLM)
OPENAI_BASE_URL=https://api....</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #25</div>
<div class='chunk-meta'>Lines 695-720</div>
<span class='tag'>merged_section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Performance Characteristics</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Performance Characteristics

## Performance Characteristics

Section: AI Chat Application - Complete System Architecture & Flow &gt; Performance Characteristics &gt; Startup Time

### Startup Time
- **Local Embeddings**: 3-5 seconds (model loading)
- **OpenAI Embeddings**: &lt; 1 second (no model loading)
- **LLM Loading**: Varies by provider (Ollama: 2-3s, LlamaCPP: 5-10s)

Section: AI Chat Application - Complete System Architecture & ...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #26</div>
<div class='chunk-meta'>Lines 721-742</div>
<span class='tag'>merged_section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Error Handling</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Error Handling

## Error Handling

Section: AI Chat Application - Complete System Architecture & Flow &gt; Error Handling &gt; Common Scenarios

### Common Scenarios
1. **LLM Provider Unavailable**
   - Backend logs error, returns 503
   - Frontend shows "LLM model not loaded" message

2. **Embedding Failure**
   - Falls back to non-RAG mode
   - Logs warning, continues without context

3. **ChromaDB Connection Issues**
   - Retries ...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #27</div>
<div class='chunk-meta'>Lines 743-751</div>
<span class='tag'>steps
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Security Considerations</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Security Considerations

## Security Considerations
1. **File Uploads**: Validated extensions, sanitized filenames
2. **API Keys**: Stored in environment variables, never exposed to frontend
3. **SSO Tokens**: Supported for enterprise authentication
4. **CORS**: Configured for specific origins only

---</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #28</div>
<div class='chunk-meta'>Lines 752-760</div>
<span class='tag'>steps
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Scalability Notes</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Scalability Notes

## Scalability Notes
1. **Horizontal Scaling**: Backend is stateless (except ChromaDB)
2. **ChromaDB**: Can be replaced with cloud vector DB (Pinecone, Weaviate)
3. **Session Storage**: Can be moved to Redis for distributed systems
4. **LLM Providers**: Can load balance across multiple instances

---</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #29</div>
<div class='chunk-meta'>Lines 761-777</div>
<span class='tag'>merged_section
</span>
<span class='tag'>Has Code</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Monitoring & Observability</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Monitoring & Observability

## Monitoring & Observability

Section: AI Chat Application - Complete System Architecture & Flow &gt; Monitoring & Observability &gt; Logs to Monitor

### Logs to Monitor
1. **Startup**: Provider initialization, model loading
2. **Runtime**: Chat requests, RAG retrievals, errors
3. **Performance**: Token counts, processing times, embedding speeds

Section: AI Chat Application - Complete System Architectur...</div>
</div>
<div class='chunk'>
<div class='chunk-title'>Chunk #30</div>
<div class='chunk-meta'>Lines 778-804</div>
<span class='tag'>section
</span>
<div class='section-path'>AI Chat Application - Complete System Architecture & Flow > Conclusion</div>
<div class='content'>Section: AI Chat Application - Complete System Architecture & Flow &gt; Conclusion

## Conclusion

This application provides a flexible, extensible AI chat system with advanced RAG features, particularly **Fusion Retrieval using Reciprocal Rank Fusion (RRF)**. The modular architecture allows easy swapping of LLM providers and embedding models, making it suitable for both development and production environments.

**Key Strengths:**
- **Advanced Retrieval**: Fusion of vector, BM25, and multi-query st...</div>
</div>
</div></body></html>